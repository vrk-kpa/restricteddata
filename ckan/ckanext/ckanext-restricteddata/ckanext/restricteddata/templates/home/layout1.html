<div role="main">
  <div class="main hero">
    <h1 class="hero">{{ _('All finnish restricted data from one place') }}</h1>
    <div class="hero-stats">
      {% set statistics = h.get_site_statistics() %}
      <a href="{{ h.url_for('dataset.search') }}" aria-label="{{ _('show all datasets') }}">
        <span class="hero-stats-count">{{ statistics.dataset_count }}</span>
        <span class="hero-stats-unit">{{ _('datasets') }}</span>
      </a>
      <a href="{{ h.url_for('organization.index') }}" aria-label="{{ _('show all organizations') }}">
        <span class="hero-stats-count">{{ statistics.organization_count }}</span>
        <span class="hero-stats-unit">{{ _('organizations') }}</span>
      </a>
    </div>
    <div class="hero-search">
      <form action="{{ url_for('dataset.search') }}">
        <div class="search-input-container">
          <input name="q" type="text" class="form-control search" placeholder="{{ _('Type what you are searching for')}}">
          <button type="submit"><i class="fa-light fa-search"></i></button>
        </div>
      </form>
      {# Advanced search not implemented yet <a>{{ _('Use advanced search') }}</a> #}
    </div>
  </div>

  <section>
    <h2>{{ _('Restricted data categories') }}</h2>
    <ul class="category-grid">
      {% for group in h.get_homepage_groups() %}
        <li>
          <a href="{{ h.url_for('group.read', id=group.name) }}" aria-label="{{ _('show group') }} {{ h.get_translated(group, 'title') }}">
            <img class="category-icon" src="{{ group.image_display_url }}">
            <span class="category-title">{{ h.get_translated(group, 'title') }}</span>
            <span class="category-badge">{{ group.package_count }}</span>
          </a>
        </li>
      {% endfor %}
    </ul>
  </section>

  <section class="data-sources">
    <h2>{{ _('Restricted data data sources') }}</h2>

    <div class="rd-cards">
      <div class="rd-card">
        <div class="icon">
          <div class="icon-oval-background">
            <img src="/images/datasets.svg">
          </div>
        </div>
        <div class="content">
          <h3>{{ _('Datasets') }}</h3>
          <a class="chevron-link" href="{{ h.url_for('dataset.search') }}">{{ _('Browse datasets') }}</a>
        </div>
      </div>

      <div class="rd-card">
        <div class="icon">
          <div class="icon-oval-background">
            <img src="/images/organizations.svg">
          </div>
        </div>
        <div class="content">
          <h3>{{ _('Organizations') }}</h3>
          <a class="chevron-link" href="{{ h.url_for('organization.index') }}">{{ _('Browse organizations') }}</a>
        </div>
      </div>
    </div>
  </section>

  <section class="open-data">
    <h2>{{ _('All Finnish open data from one place') }}</h2>

    <div class="rd-cards">
      <div class="rd-card">
        <div class="icon">
          <div class="icon-oval-background">
            <img src="/images/icon.svg">
          </div>
        </div>
        <div class="content">
          <h3>{{ _('Suomi.fi open data') }}</h3>
          <a class="chevron-link" href="https://avoindata.fi" aria-label="{{ _('navigate to Suomi.fi open data') }}">{{ _('Navigate to site') }}</a>
        </div>
      </div>
    </div>
  </section>

  <section>
    <h2>Ajankohtaista</h2>
    <ul class="news-items">
      {% for news in h.get_homepage_news() %}
      {% set title = news.title[h.lang()] or news.title.fi %}
      {% set published = news.published | datetimeformat('d.M.y') %}
      {% set url = news.url[h.lang()] or news.url.fi %}
      <li>
        <span class="news-published">{{ _('Published') }} {{ published }}</span>
        <a class="news-title" href="{{ url }}" aria-label="{{ _('open news item') }} {{ title }}"><h3>{{ title }}</h3></a>
        {% for tag in news.tags %}
          <span class="news-badge">{{ tag.name[h.lang()] or tag.name.fi }}</span>
        {% endfor %}
      </li>
      {% endfor %}
    </ul>
    <a class="chevron-link" href="https://palveluhallinta.suomi.fi/{{ h.lang() }}/ajankohtaista/uutiset/">{{ _('Browse all news and disruption notices') }}</a>
  </section>
</div>
